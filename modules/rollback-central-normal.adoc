// Module included in the following assemblies:
//
// * upgrade/upgrade-from-44.adoc
:_mod-docs-content-type: PROCEDURE
[id="rollback-central-normal_{context}"]
= Rolling back Central normally

[role="_abstract"]
You can roll back to a previous version of Central if upgrading {product-title} fails.

.Prerequisites

* **Enough disk space**: Before you can perform a rollback, you must have free disk space available on your persistent storage. {product-title} uses disk space to keep a copy of databases during the upgrade. If the disk space is not enough to store a copy and the upgrade fails, you will not be able to roll back to an earlier version.
* **Internal database rollback (4.8 to earlier)**: If you are rolling back from {product-title-short} 4.8 to an earlier version and use the internal database (`central-db`), you must first restore the database from a PostgreSQL 13 backup.
{product-title-short} creates this backup during the upgrade.

** To restore the database, add the `RESTORE_BACKUP=true` and `FORCE_OLD_BINARIES=true` environment variables to the `central-db` and `init-db` containers of the `central-db` component.
** For details on injecting environment variables, see "Injecting an environment variable into the Central deployment" in the additional resources section.

.Procedure

* Run the following command to roll back to a previous version when an upgrade fails (before the Central service starts):
+
[source,terminal]
----
$ oc -n stackrox rollout undo deploy/central <1>
----
<1> If you use Kubernetes, enter `kubectl` instead of `oc`.
